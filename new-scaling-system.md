# НОВАЯ СИСТЕМА МАСШТАБИРОВАНИЯ

## Проблема
На маленьких экранах элементы "едут" и не масштабируются правильно.

## Решение
Реализована система **viewport как телевизор** с CSS `transform: scale()`.

## Структура

```
┌─────────────────────────────────────────────────────────────┐
│                    ЭКРАН ПОЛЬЗОВАТЕЛЯ                      │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                PREVIEW-AREA                       │   │
│  │  ┌─────────────────────────────────────────────┐   │   │
│  │  │                VIEWPORT                     │   │   │
│  │  │  ┌─────────────────────────────────────┐   │   │   │
│  │  │  │                STAGE                │   │   │   │
│  │  │  │  ┌─────────────────────────────┐   │   │   │   │
│  │  │  │  │    CONNECTED 1080x1920     │   │   │   │   │
│  │  │  │  │    (фиксированный макет)   │   │   │   │   │
│  │  │  │  │                             │   │   │   │   │
│  │  │  │  │  • Шрифты: 22px, 13px      │   │   │   │   │
│  │  │  │  │  • Размеры: 72px, 20px     │   │   │   │   │
│  │  │  │  │  • Отступы: 20px, 50px     │   │   │   │   │
│  │  │  │  │  • Canvas: 1080x1920       │   │   │   │   │
│  │  │  │  └─────────────────────────────┘   │   │   │   │
│  │  │  └─────────────────────────────────────┘   │   │   │
│  │  └─────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## Как это работает

### 1. HTML структура
```html
<div class="preview-area">
    <div id="viewport">
        <div id="stage">
            <div id="connected">  <!-- 1080x1920 фиксированный -->
                <canvas id="route-canvas"></canvas>
                <!-- Все элементы в фиксированных координатах -->
            </div>
        </div>
    </div>
</div>
```

### 2. CSS стили
```css
#viewport {
    position: relative;
    width: 100%;
    height: 100%;
    display: grid;
    place-items: center;
    overflow: hidden;
}

#stage {
    position: relative;
    width: 100%;
    height: 100%;
    display: grid;
    place-items: center;
}

#connected {
    position: relative;
    width: 1080px;
    height: 1920px;
    transform-origin: center center;
    will-change: transform;
    overflow: hidden;
}
```

### 3. JavaScript масштабирование
```javascript
applyScale() {
    const vpRect = this.viewport.getBoundingClientRect();
    const scale = Math.min(vpRect.width / 1080, vpRect.height / 1920);
    
    // Масштабируем только визуально
    this.connected.style.transform = `scale(${scale})`;
}
```

## Преимущества

✅ **Макет неизменен**: Все элементы остаются в фиксированных координатах 1080x1920  
✅ **Правильное масштабирование**: На любых экранах макет выглядит одинаково  
✅ **Производительность**: Один расчет масштаба для всех элементов  
✅ **Простота разработки**: Работаем с фиксированными размерами  
✅ **Без "езды" элементов**: Все элементы масштабируются как единое целое  

## Результат

🎯 **Идеальное масштабирование** на любых экранах  
🎯 **Макет как в геймдеве** - фиксированное разрешение 1080x1920  
🎯 **Viewport как телевизор** - показывает макет в разных масштабах  
🎯 **Профессиональное качество** как в AAA играх  

## Аналогия

Это как смотреть на экран телевизора:
- **Изображение**: Остается неизменным (макет 1080x1920)
- **Экран**: Может быть разного размера (viewport)
- **Результат**: Изображение масштабируется под размер экрана
