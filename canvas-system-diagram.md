# Система фиксированного разрешения Canvas

## Принцип работы

```
┌─────────────────────────────────────────────────────────────┐
│                    ЭКРАН ПОЛЬЗОВАТЕЛЯ                      │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                VIEWPORT                             │   │
│  │  ┌─────────────────────────────────────────────┐   │   │
│  │  │         FIXED RESOLUTION                    │   │   │
│  │  │           1080 x 1920                      │   │   │
│  │  │                                             │   │   │
│  │  │  ┌─────────────────────────────────────┐    │   │   │
│  │  │  │        CANVAS CONTENT              │    │   │   │
│  │  │  │                                   │    │   │   │
│  │  │  │  • Фоновые изображения            │    │   │   │
│  │  │  │  • Маршруты (полилинии)           │    │   │   │
│  │  │  │  • Текст и метрики                │    │   │   │
│  │  │  │  • Логотипы                       │    │   │   │
│  │  │  │                                   │    │   │   │
│  │  │  └─────────────────────────────────────┘    │   │   │
│  │  └─────────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

## Ключевые компоненты

### 1. Фиксированное внутреннее разрешение
- **Ширина**: 1080px
- **Высота**: 1920px  
- **Соотношение**: 9:16
- **Все элементы** рассчитываются в этих координатах

### 2. Адаптивное масштабирование
```javascript
// Расчет масштаба
const scaleX = containerWidth / 1080;
const scaleY = containerHeight / 1920;
const scale = Math.min(scaleX, scaleY);

// Центрирование
const offsetX = (containerWidth - (1080 * scale)) / 2;
const offsetY = (containerHeight - (1920 * scale)) / 2;
```

### 3. Система координат
```javascript
// Применение трансформаций
ctx.save();
ctx.translate(offsetX, offsetY);
ctx.scale(scale, scale);
// Все рисование происходит в координатах 1080x1920
ctx.restore();
```

## Преимущества

✅ **Консистентность**: Все элементы выглядят одинаково на любых экранах  
✅ **Предсказуемость**: Размеры шрифтов, отступы всегда одинаковые  
✅ **Качество**: Четкое масштабирование без искажений  
✅ **Производительность**: Один расчет масштаба для всех элементов  
✅ **Экспорт**: Точное разрешение для сохранения изображений  

## Как это работает

1. **Инициализация**: Устанавливаем фиксированное разрешение 1080x1920
2. **Расчет viewport**: Определяем масштаб и отступы для контейнера
3. **Трансформации**: Применяем translate + scale к canvas контексту
4. **Рендеринг**: Все элементы рисуются в координатах 1080x1920
5. **Адаптация**: Автоматическое масштабирование под любой экран

## Результат

🎯 **Идеальное масштабирование** на любых устройствах  
🎯 **Четкие границы** и пропорции  
🎯 **Профессиональное качество** как в геймдеве  
🎯 **Простота разработки** - работаем в фиксированных координатах
